# DJ 项目 Skills 文档

本文档记录了 DJ 项目中使用的所有 Skills 定义和配置。

## 目录

- [Skill 使用说明](#skill-使用说明)
- [已配置 Skills](#已配置-skills)
- [Skill 模板](#skill-模板)

---

## Skill 使用说明

### 什么是 Skill？

Skill 是 Claude Code 中的可复用工作流程，类似于自定义命令或宏。通过定义 Skill，可以让 Claude 自动执行特定的复杂任务流程。

### 如何使用？

在对话中直接调用：
```
/skill-name [参数]
```

### 配置位置

Skills 配置在项目根目录的 `.claude.json` 文件中。

---

## 已配置 Skills

### 1. 部署检查 (deploy-check)

**用途：** 在部署前进行全面检查，确保代码质量和功能正常

**触发命令：** `/deploy-check`

**执行流程：**
1. 检查前端 TypeScript 编译错误
2. 检查后端 API 路由配置
3. 验证环境变量配置
4. 检查数据库连接配置
5. 生成部署检查报告

**配置示例：**
```json
{
  "name": "deploy-check",
  "description": "部署前全面检查",
  "prompt": "请执行以下部署前检查流程：\n1. 检查前端代码是否有 TypeScript 编译错误\n2. 检查后端 API 路由配置\n3. 验证环境变量配置\n4. 检查数据库连接字符串\n5. 生成详细的检查报告"
}
```

---

### 2. 数据库备份 (db-backup)

**用途：** 创建数据库备份并保存到指定位置

**触发命令：** `/db-backup [备份名称]`

**执行流程：**
1. 连接到 MongoDB Atlas
2. 导出所有集合数据
3. 创建带时间戳的备份文件
4. 验证备份完整性
5. 输出备份文件路径

**配置示例：**
```json
{
  "name": "db-backup",
  "description": "创建数据库备份",
  "prompt": "请执行数据库备份流程：\n1. 连接到 MongoDB\n2. 导出所有集合\n3. 保存为 backup_[timestamp].json\n4. 验证备份完整性"
}
```

---

### 3. API 测试 (api-test)

**用途：** 批量测试所有 API 端点，验证功能正常

**触发命令：** `/api-test [模块名称]`

**执行流程：**
1. 读取 API 路由配置
2. 对每个端点执行基础测试
3. 检查响应状态码和数据格式
4. 生成测试报告
5. 标记失败的端点

**配置示例：**
```json
{
  "name": "api-test",
  "description": "批量测试 API 端点",
  "prompt": "请执行 API 测试流程：\n1. 读取所有路由定义\n2. 测试每个端点的基本功能\n3. 验证响应格式\n4. 生成详细测试报告"
}
```

---

### 4. 代码优化建议 (code-review)

**用途：** 分析指定文件或模块，提供优化建议

**触发命令：** `/code-review [文件路径]`

**执行流程：**
1. 读取指定文件代码
2. 分析代码质量和性能问题
3. 检查安全隐患
4. 提供具体优化建议
5. 标注优先级

**配置示例：**
```json
{
  "name": "code-review",
  "description": "代码优化建议",
  "prompt": "请对指定代码进行审查：\n1. 分析代码结构和质量\n2. 识别性能瓶颈\n3. 检查安全问题\n4. 提供优化建议（按优先级排序）"
}
```

---

### 5. 功能文档生成 (doc-gen)

**用途：** 自动生成指定模块的功能文档

**触发命令：** `/doc-gen [模块名称]`

**执行流程：**
1. 读取模块代码和注释
2. 提取 API 定义和数据结构
3. 分析功能逻辑
4. 生成 Markdown 文档
5. 包含使用示例

**配置示例：**
```json
{
  "name": "doc-gen",
  "description": "生成功能文档",
  "prompt": "请为指定模块生成文档：\n1. 读取代码和注释\n2. 提取 API 定义\n3. 分析功能流程\n4. 生成 Markdown 格式文档\n5. 包含使用示例"
}
```

---

### 6. 批量数据导入 (data-import)

**用途：** 从 Excel 或 JSON 文件批量导入数据到数据库

**触发命令：** `/data-import [文件路径] [集合名称]`

**执行流程：**
1. 读取源文件（Excel/JSON）
2. 验证数据格式
3. 数据清洗和转换
4. 批量插入数据库
5. 生成导入报告

**配置示例：**
```json
{
  "name": "data-import",
  "description": "批量数据导入",
  "prompt": "请执行数据导入流程：\n1. 读取文件内容\n2. 验证数据格式\n3. 清洗和转换数据\n4. 批量导入数据库\n5. 输出导入统计"
}
```

---

### 7. 性能分析 (perf-analyze)

**用途：** 分析应用性能瓶颈，提供优化方案

**触发命令：** `/perf-analyze`

**执行流程：**
1. 分析代码中的性能热点
2. 检查数据库查询效率
3. 分析前端渲染性能
4. 识别内存泄漏风险
5. 提供优化建议

**配置示例：**
```json
{
  "name": "perf-analyze",
  "description": "性能分析",
  "prompt": "请执行性能分析：\n1. 识别性能热点\n2. 分析数据库查询\n3. 检查前端性能\n4. 识别内存问题\n5. 提供优化方案"
}
```

---

## Skill 模板

### 基础模板

```json
{
  "name": "skill-name",
  "description": "简短描述",
  "prompt": "详细的执行步骤说明"
}
```

### 带参数的模板

```json
{
  "name": "skill-name",
  "description": "简短描述",
  "prompt": "执行步骤：\n参数1: {{arg1}}\n参数2: {{arg2}}\n\n具体流程...",
  "args": {
    "arg1": {
      "type": "string",
      "required": true,
      "description": "参数1说明"
    },
    "arg2": {
      "type": "string",
      "required": false,
      "description": "参数2说明"
    }
  }
}
```

---

## 添加新 Skill 的步骤

1. **规划 Skill 流程**
   - 明确 Skill 要解决的问题
   - 设计执行步骤
   - 确定所需参数

2. **编写 Skill 定义**
   - 在本文档添加记录
   - 编写详细的 prompt
   - 测试执行效果

3. **配置到 .claude.json**
   - 将 Skill 定义添加到配置文件
   - 测试调用是否正常

4. **文档维护**
   - 更新本文档的目录
   - 添加使用示例
   - 记录注意事项

---

## 最佳实践

### Prompt 编写建议

1. **使用编号列表**：清晰的步骤编号便于执行
2. **明确输出要求**：说明需要生成什么格式的结果
3. **包含验证步骤**：确保执行结果的正确性
4. **处理异常情况**：说明遇到错误时的处理方式

### 示例：

```
请执行以下任务：
1. [步骤1描述]
   - 子步骤说明
   - 预期结果
2. [步骤2描述]
3. 如果遇到错误，[错误处理方式]
4. 最后输出 [输出格式要求]
```

---

## 常见问题

### Q: Skill 和普通对话的区别？
A: Skill 是预定义的工作流程，可以复用；普通对话是临时性的交互。

### Q: 如何调试 Skill？
A: 在 prompt 中添加详细的日志输出要求，逐步验证每个步骤。

### Q: Skill 可以调用其他 Skill 吗？
A: 可以在 prompt 中说明需要调用其他 Skill。

---

## 更新日志

- **2026-02-10**: 创建 Skills 文档，初始化文档结构
